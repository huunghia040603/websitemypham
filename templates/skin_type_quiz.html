{% extends "base.html" %}

{% block title %}Quiz Kiểm Tra Loại Da - BuddysKincare{% endblock %}
{% block description %}Bài test miễn phí giúp xác định loại da chính xác. Nhận tư vấn skincare phù hợp và sản phẩm được đề xuất cho từng loại da.{% endblock %}
{% block keywords %}kiểm tra loại da, skin type test, quiz da, tư vấn skincare, loại da{% endblock %}

{% block og_type %}website{% endblock %}
{% block og_title %}Quiz Kiểm Tra Loại Da - BuddysKincare{% endblock %}
{% block og_description %}Bài test miễn phí giúp xác định loại da chính xác. Nhận tư vấn skincare phù hợp và sản phẩm được đề xuất cho từng loại da.{% endblock %}
{% block og_url %}https://buddyskincare.vn/skin-type-quiz{% endblock %}
{% block og_image %}https://buddyskincare.vn/static/image/skin-quiz-og.jpg{% endblock %}

{% block canonical_url %}https://buddyskincare.vn/skin-type-quiz{% endblock %}

{% block extra_css %}
<style>
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .quiz-card {
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .question-card {
            display: none;
        }
        
        .question-card.active {
            display: block;
        }
        
        .question-title {
            color: #2c3e50;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .answer-option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .answer-option:hover {
            background: #e3f2fd;
            border-color: #2196f3;
        }
        
        .answer-option.selected {
            background: #e3f2fd;
            border-color: #2196f3;
            box-shadow: 0 2px 5px rgba(33, 150, 243, 0.3);
        }
        
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background: #e9ecef;
            margin-bottom: 30px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2196f3, #21cbf3);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .quiz-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }
        
        .btn-quiz {
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn-quiz:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .result-card {
            text-align: center;
            padding: 40px;
        }
        
        .skin-type-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }
        
        .skin-type-title {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .skin-type-description {
            font-size: 1.2em;
            color: #6c757d;
            margin-bottom: 30px;
        }
        
        .recommendations {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .recommendation-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .recommendation-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .recommendation-description {
            color: #6c757d;
            margin-bottom: 15px;
        }
        
        .recommendation-products {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .product-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        .quiz-stats {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #2196f3;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .share-buttons {
            margin-top: 30px;
        }
        
        .share-btn {
            margin: 5px;
            border-radius: 25px;
        }
        
        .restart-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .restart-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .quiz-container {
                padding: 15px;
                margin: 0;
            }
            
            .quiz-card {
                padding: 20px;
                margin-bottom: 15px;
            }
            
            .question-title {
                font-size: 1.1em;
                margin-bottom: 15px;
            }
            
            .answer-option {
                padding: 12px;
                margin: 8px 0;
                font-size: 0.9em;
            }
            
            .quiz-nav {
                flex-direction: column;
                gap: 15px;
                margin-top: 20px;
            }
            
            .btn-quiz {
                padding: 10px 25px;
                font-size: 0.9em;
            }
            
            .skin-type-title {
                font-size: 2em;
            }
            
            .skin-type-description {
                font-size: 1.1em;
            }
            
            .recommendations {
                padding: 20px;
                margin: 20px 0;
            }
            
            .recommendation-item {
                padding: 15px;
                margin: 10px 0;
            }
            
            .share-buttons {
                margin-top: 20px;
            }
            
            .share-btn {
                margin: 3px;
                font-size: 0.8em;
                padding: 8px 15px;
            }
        }
        
        @media (max-width: 576px) {
            .quiz-container {
                padding: 10px;
            }
            
            .quiz-card {
                padding: 15px;
            }
            
            .question-title {
                font-size: 1em;
            }
            
            .answer-option {
                padding: 10px;
                font-size: 0.85em;
            }
            
            .skin-type-title {
                font-size: 1.8em;
            }
            
            .skin-type-description {
                font-size: 1em;
            }
            
            .recommendations {
                padding: 15px;
            }
            
            .recommendation-item {
                padding: 12px;
            }
            
            .product-tag {
                font-size: 0.8em;
                padding: 3px 8px;
            }
            
            .stat-number {
                font-size: 1.5em;
            }
        }
    </style>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
        <div class="quiz-container">
            <!-- Header -->
            <div class="text-center mb-5">
                <h1 class="display-4 mb-3">
                    <i class="fas fa-user-md me-3"></i>
                    Quiz Kiểm Tra Loại Da
                </h1>
                <p class="lead text-muted">
                    Khám phá loại da của bạn và nhận tư vấn skincare phù hợp. 
                    <a href="/beauty-ingredient-dictionary" class="text-primary">Tìm hiểu thành phần mỹ phẩm</a> để hiểu rõ hơn về sản phẩm bạn đang sử dụng.
                </p>
            </div>
            
            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            
            <!-- Quiz Questions -->
            <div id="quizQuestions">
                <!-- Question 1 -->
                <div class="quiz-card question-card active" data-question="1">
                    <div class="question-title">
                        <i class="fas fa-question-circle me-2"></i>
                        Da mặt bạn thường như thế nào vào buổi sáng?
                    </div>
                    <div class="answer-option" data-answer="oily">
                        <i class="fas fa-tint me-2"></i>
                        Da bóng nhờn, đặc biệt ở vùng chữ T
                    </div>
                    <div class="answer-option" data-answer="dry">
                        <i class="fas fa-sun me-2"></i>
                        Da khô, căng và có thể bong tróc
                    </div>
                    <div class="answer-option" data-answer="combination">
                        <i class="fas fa-balance-scale me-2"></i>
                        Vùng chữ T bóng nhờn, vùng má khô
                    </div>
                    <div class="answer-option" data-answer="normal">
                        <i class="fas fa-smile me-2"></i>
                        Da mềm mại, không quá khô cũng không quá nhờn
                    </div>
                </div>
                
                <!-- Question 2 -->
                <div class="quiz-card question-card" data-question="2">
                    <div class="question-title">
                        <i class="fas fa-question-circle me-2"></i>
                        Lỗ chân lông của bạn như thế nào?
                    </div>
                    <div class="answer-option" data-answer="oily">
                        <i class="fas fa-circle me-2"></i>
                        Lỗ chân lông to, rõ ràng, đặc biệt ở mũi và má
                    </div>
                    <div class="answer-option" data-answer="dry">
                        <i class="fas fa-circle me-2"></i>
                        Lỗ chân lông nhỏ, khó nhìn thấy
                    </div>
                    <div class="answer-option" data-answer="combination">
                        <i class="fas fa-circle me-2"></i>
                        Lỗ chân lông to ở vùng chữ T, nhỏ ở vùng má
                    </div>
                    <div class="answer-option" data-answer="normal">
                        <i class="fas fa-circle me-2"></i>
                        Lỗ chân lông vừa phải, không quá to cũng không quá nhỏ
                    </div>
                </div>
                
                <!-- Question 3 -->
                <div class="quiz-card question-card" data-question="3">
                    <div class="question-title">
                        <i class="fas fa-question-circle me-2"></i>
                        Da bạn có thường bị mụn không?
                    </div>
                    <div class="answer-option" data-answer="oily">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Thường xuyên bị mụn, đặc biệt là mụn đầu đen và mụn trứng cá
                    </div>
                    <div class="answer-option" data-answer="dry">
                        <i class="fas fa-check-circle me-2"></i>
                        Hiếm khi bị mụn
                    </div>
                    <div class="answer-option" data-answer="combination">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Thỉnh thoảng bị mụn ở vùng chữ T
                    </div>
                    <div class="answer-option" data-answer="normal">
                        <i class="fas fa-check-circle me-2"></i>
                        Rất ít khi bị mụn
                    </div>
                </div>
                
                <!-- Question 4 -->
                <div class="quiz-card question-card" data-question="4">
                    <div class="question-title">
                        <i class="fas fa-question-circle me-2"></i>
                        Da bạn có nhạy cảm không?
                    </div>
                    <div class="answer-option" data-answer="sensitive">
                        <i class="fas fa-heart me-2"></i>
                        Rất nhạy cảm, dễ bị kích ứng với sản phẩm mới
                    </div>
                    <div class="answer-option" data-answer="oily">
                        <i class="fas fa-shield-alt me-2"></i>
                        Không nhạy cảm, da khỏe mạnh
                    </div>
                    <div class="answer-option" data-answer="dry">
                        <i class="fas fa-shield-alt me-2"></i>
                        Hơi nhạy cảm, đặc biệt với sản phẩm có hương liệu
                    </div>
                    <div class="answer-option" data-answer="normal">
                        <i class="fas fa-shield-alt me-2"></i>
                        Không nhạy cảm, da ổn định
                    </div>
                </div>
                
                <!-- Question 5 -->
                <div class="quiz-card question-card" data-question="5">
                    <div class="question-title">
                        <i class="fas fa-question-circle me-2"></i>
                        Da bạn có thường bị đỏ hoặc viêm không?
                    </div>
                    <div class="answer-option" data-answer="sensitive">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Thường xuyên bị đỏ, viêm, đặc biệt khi thay đổi thời tiết
                    </div>
                    <div class="answer-option" data-answer="oily">
                        <i class="fas fa-check-circle me-2"></i>
                        Hiếm khi bị đỏ hoặc viêm
                    </div>
                    <div class="answer-option" data-answer="dry">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Thỉnh thoảng bị đỏ, đặc biệt khi da khô
                    </div>
                    <div class="answer-option" data-answer="normal">
                        <i class="fas fa-check-circle me-2"></i>
                        Rất ít khi bị đỏ hoặc viêm
                    </div>
                </div>
            </div>
            
            <!-- Quiz Navigation -->
            <div class="quiz-nav" id="quizNav">
                <button class="btn btn-outline-secondary btn-quiz" id="prevBtn" style="display: none;">
                    <i class="fas fa-arrow-left me-2"></i>Trước
                </button>
                <div class="text-center">
                    <span id="questionCounter">Câu 1 / 5</span>
                </div>
                <button class="btn btn-primary btn-quiz" id="nextBtn">
                    Tiếp <i class="fas fa-arrow-right ms-2"></i>
                </button>
            </div>
            
            <!-- Results -->
            <div id="quizResults" style="display: none;">
                <div class="quiz-card result-card">
                    <div class="skin-type-icon" id="skinTypeIcon">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="skin-type-title" id="skinTypeTitle">Loại Da Của Bạn</div>
                    <div class="skin-type-description" id="skinTypeDescription">
                        Mô tả chi tiết về loại da của bạn
                    </div>
                    
                    <div class="recommendations">
                        <h4 class="mb-4">
                            <i class="fas fa-lightbulb me-2"></i>
                            Khuyến Nghị Skincare
                        </h4>
                        <div id="recommendationsList">
                            <!-- Recommendations will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="quiz-stats">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <div class="stat-number" id="totalUsers">50,000+</div>
                                    <div class="stat-label">Người Đã Test</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <div class="stat-number" id="accuracy">97%</div>
                                    <div class="stat-label">Độ Chính Xác</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <div class="stat-number" id="satisfaction">99%</div>
                                    <div class="stat-label">Hài Lòng</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <div class="stat-number" id="recommendations">500+</div>
                                    <div class="stat-label">Sản Phẩm</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="share-buttons">
                        <h5 class="mb-3">Chia Sẻ Kết Quả:</h5>
                        <button class="btn btn-primary share-btn" onclick="shareResult('facebook')">
                            <i class="fab fa-facebook me-2"></i>Facebook
                        </button>
                        <button class="btn btn-info share-btn" onclick="shareResult('twitter')">
                            <i class="fab fa-twitter me-2"></i>Twitter
                        </button>
                        <button class="btn btn-success share-btn" onclick="shareResult('zalo')">
                            <i class="fab fa-telegram me-2"></i>Zalo
                        </button>
                        <button class="btn btn-secondary share-btn" onclick="copyLink()">
                            <i class="fas fa-link me-2"></i>Copy Link
                        </button>
                    </div>
                    
                    <div class="mt-4">
                        <button class="restart-btn" onclick="restartQuiz()">
                            <i class="fas fa-redo me-2"></i>Làm Lại Quiz
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- External Resources Section -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="mb-0">
                            <i class="fas fa-external-link-alt me-2"></i>
                            Tài Liệu Tham Khảo & Nguồn Uy Tín
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h5 class="text-primary mb-3">
                                    <i class="fas fa-user-md me-2"></i>
                                    Chuyên Gia Da Liễu
                                </h5>
                                <ul class="list-unstyled">
                                    <li class="mb-2">
                                        <a href="https://www.aad.org/public/everyday-care/skin-care-basics" target="_blank" rel="nofollow" class="text-decoration-none">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            AAD Skin Care Basics
                                        </a>
                                        <small class="text-muted d-block">Hướng dẫn chăm sóc da cơ bản từ Học viện Da liễu Hoa Kỳ</small>
                                    </li>
                                    <li class="mb-2">
                                        <a href="https://www.mayoclinic.org/healthy-lifestyle/adult-health/in-depth/skin-care/art-20048237" target="_blank" rel="nofollow" class="text-decoration-none">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            Mayo Clinic Skin Care
                                        </a>
                                        <small class="text-muted d-block">Hướng dẫn chăm sóc da từ Mayo Clinic</small>
                                    </li>
                                    <li class="mb-2">
                                        <a href="https://www.webmd.com/beauty/whats-your-skin-type" target="_blank" rel="nofollow" class="text-decoration-none">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            WebMD Skin Type Guide
                                        </a>
                                        <small class="text-muted d-block">Hướng dẫn xác định loại da từ WebMD</small>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h5 class="text-primary mb-3">
                                    <i class="fas fa-microscope me-2"></i>
                                    Nghiên Cứu Khoa Học
                                </h5>
                                <ul class="list-unstyled">
                                    <li class="mb-2">
                                        <a href="https://www.ncbi.nlm.nih.gov/pubmed/?term=skin+type+classification" target="_blank" rel="nofollow" class="text-decoration-none">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            PubMed Skin Type Research
                                        </a>
                                        <small class="text-muted d-block">Nghiên cứu khoa học về phân loại loại da</small>
                                    </li>
                                    <li class="mb-2">
                                        <a href="https://www.jaad.org/article/S0190-9622(19)30001-9/fulltext" target="_blank" rel="nofollow" class="text-decoration-none">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            JAAD Skin Type Studies
                                        </a>
                                        <small class="text-muted d-block">Nghiên cứu chuyên sâu về loại da</small>
                                    </li>
                                    <li class="mb-2">
                                        <a href="https://www.dermatologytimes.com/view/skin-type-classification-systems" target="_blank" rel="nofollow" class="text-decoration-none">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            Dermatology Times
                                        </a>
                                        <small class="text-muted d-block">Hệ thống phân loại loại da hiện đại</small>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-12">
                                <h5 class="text-primary mb-3">
                                    <i class="fas fa-graduation-cap me-2"></i>
                                    Tài Liệu Chuyên Môn
                                </h5>
                                <div class="row">
                                    <div class="col-md-4">
                                        <a href="https://www.cosmeticsandtoiletries.com/research/methods/standards/How-to-Identify-Your-Skin-Type-569198251.html" target="_blank" rel="nofollow" class="text-decoration-none d-block mb-2">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            Cosmetics & Toiletries
                                        </a>
                                        <a href="https://www.beautypackaging.com/articles/2019/03/skin-type-analysis-tools" target="_blank" rel="nofollow" class="text-decoration-none d-block mb-2">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            Beauty Packaging
                                        </a>
                                    </div>
                                    <div class="col-md-4">
                                        <a href="https://www.scconline.org/Resources/Technical-Resources" target="_blank" rel="nofollow" class="text-decoration-none d-block mb-2">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            Society of Cosmetic Chemists
                                        </a>
                                        <a href="https://www.ifraorg.org/en-us/ingredients" target="_blank" rel="nofollow" class="text-decoration-none d-block mb-2">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            IFRA Ingredients
                                        </a>
                                    </div>
                                    <div class="col-md-4">
                                        <a href="https://www.cir-safety.org/ingredients" target="_blank" rel="nofollow" class="text-decoration-none d-block mb-2">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            CIR Safety Database
                                        </a>
                                        <a href="https://www.ctpa.org.uk/consumer-advice" target="_blank" rel="nofollow" class="text-decoration-none d-block mb-2">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            CTPA Consumer Advice
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="alert alert-info mt-4">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>Lưu ý:</strong> Quiz này được phát triển dựa trên các nghiên cứu khoa học và hướng dẫn từ các chuyên gia da liễu uy tín. 
                            Kết quả chỉ mang tính chất tham khảo và không thay thế cho việc tư vấn trực tiếp từ bác sĩ da liễu.
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
        // Quiz data
        const quizData = {
            questions: [
                {
                    id: 1,
                    question: "Da mặt bạn thường như thế nào vào buổi sáng?",
                    answers: [
                        { text: "Da bóng nhờn, đặc biệt ở vùng chữ T", type: "oily" },
                        { text: "Da khô, căng và có thể bong tróc", type: "dry" },
                        { text: "Vùng chữ T bóng nhờn, vùng má khô", type: "combination" },
                        { text: "Da mềm mại, không quá khô cũng không quá nhờn", type: "normal" }
                    ]
                },
                {
                    id: 2,
                    question: "Lỗ chân lông của bạn như thế nào?",
                    answers: [
                        { text: "Lỗ chân lông to, rõ ràng, đặc biệt ở mũi và má", type: "oily" },
                        { text: "Lỗ chân lông nhỏ, khó nhìn thấy", type: "dry" },
                        { text: "Lỗ chân lông to ở vùng chữ T, nhỏ ở vùng má", type: "combination" },
                        { text: "Lỗ chân lông vừa phải, không quá to cũng không quá nhỏ", type: "normal" }
                    ]
                },
                {
                    id: 3,
                    question: "Da bạn có thường bị mụn không?",
                    answers: [
                        { text: "Thường xuyên bị mụn, đặc biệt là mụn đầu đen và mụn trứng cá", type: "oily" },
                        { text: "Hiếm khi bị mụn", type: "dry" },
                        { text: "Thỉnh thoảng bị mụn ở vùng chữ T", type: "combination" },
                        { text: "Rất ít khi bị mụn", type: "normal" }
                    ]
                },
                {
                    id: 4,
                    question: "Da bạn có nhạy cảm không?",
                    answers: [
                        { text: "Rất nhạy cảm, dễ bị kích ứng với sản phẩm mới", type: "sensitive" },
                        { text: "Không nhạy cảm, da khỏe mạnh", type: "oily" },
                        { text: "Hơi nhạy cảm, đặc biệt với sản phẩm có hương liệu", type: "dry" },
                        { text: "Không nhạy cảm, da ổn định", type: "normal" }
                    ]
                },
                {
                    id: 5,
                    question: "Da bạn có thường bị đỏ hoặc viêm không?",
                    answers: [
                        { text: "Thường xuyên bị đỏ, viêm, đặc biệt khi thay đổi thời tiết", type: "sensitive" },
                        { text: "Hiếm khi bị đỏ hoặc viêm", type: "oily" },
                        { text: "Thỉnh thoảng bị đỏ, đặc biệt khi da khô", type: "dry" },
                        { text: "Rất ít khi bị đỏ hoặc viêm", type: "normal" }
                    ]
                }
            ]
        };
        
        // Skin type results
        const skinTypeResults = {
            oily: {
                title: "Da Dầu",
                icon: "fas fa-tint",
                description: "Da bạn có xu hướng sản xuất nhiều dầu, đặc biệt ở vùng chữ T. Cần chăm sóc đặc biệt để kiểm soát dầu và ngăn ngừa mụn.",
                recommendations: [
                    {
                        title: "Cleanser",
                        description: "Sử dụng sữa rửa mặt có chứa salicylic acid hoặc benzoyl peroxide",
                        products: ["Gel rửa mặt", "Sữa rửa mặt tạo bọt", "Micellar water"]
                    },
                    {
                        title: "Toner",
                        description: "Toner có chứa AHA/BHA để thông thoáng lỗ chân lông",
                        products: ["Toner AHA", "Toner BHA", "Toner cân bằng pH"]
                    },
                    {
                        title: "Moisturizer",
                        description: "Kem dưỡng ẩm nhẹ, không gây bít tắc lỗ chân lông",
                        products: ["Gel dưỡng ẩm", "Kem dưỡng ẩm oil-free", "Serum dưỡng ẩm"]
                    },
                    {
                        title: "Sunscreen",
                        description: "Kem chống nắng không gây bít tắc lỗ chân lông",
                        products: ["Kem chống nắng gel", "Kem chống nắng matte", "Kem chống nắng oil-free"]
                    }
                ]
            },
            dry: {
                title: "Da Khô",
                icon: "fas fa-sun",
                description: "Da bạn có xu hướng thiếu ẩm, dễ bong tróc và căng. Cần chăm sóc đặc biệt để dưỡng ẩm và bảo vệ da.",
                recommendations: [
                    {
                        title: "Cleanser",
                        description: "Sữa rửa mặt dịu nhẹ, không làm khô da",
                        products: ["Sữa rửa mặt cream", "Sữa rửa mặt dầu", "Sữa rửa mặt dịu nhẹ"]
                    },
                    {
                        title: "Toner",
                        description: "Toner dưỡng ẩm, không chứa cồn",
                        products: ["Toner dưỡng ẩm", "Toner có chứa hyaluronic acid", "Toner dịu nhẹ"]
                    },
                    {
                        title: "Moisturizer",
                        description: "Kem dưỡng ẩm đậm đặc, có chứa ceramides và hyaluronic acid",
                        products: ["Kem dưỡng ẩm đậm đặc", "Kem dưỡng ẩm có ceramides", "Kem dưỡng ẩm có hyaluronic acid"]
                    },
                    {
                        title: "Sunscreen",
                        description: "Kem chống nắng có chứa chất dưỡng ẩm",
                        products: ["Kem chống nắng dưỡng ẩm", "Kem chống nắng có ceramides", "Kem chống nắng dịu nhẹ"]
                    }
                ]
            },
            combination: {
                title: "Da Hỗn Hợp",
                icon: "fas fa-balance-scale",
                description: "Da bạn có đặc điểm của cả da dầu và da khô. Vùng chữ T dầu, vùng má khô. Cần chăm sóc khác nhau cho từng vùng.",
                recommendations: [
                    {
                        title: "Cleanser",
                        description: "Sữa rửa mặt cân bằng, phù hợp cho cả vùng dầu và khô",
                        products: ["Sữa rửa mặt cân bằng", "Sữa rửa mặt dịu nhẹ", "Sữa rửa mặt có AHA nhẹ"]
                    },
                    {
                        title: "Toner",
                        description: "Toner cân bằng, có thể sử dụng khác nhau cho từng vùng",
                        products: ["Toner cân bằng", "Toner AHA cho vùng dầu", "Toner dưỡng ẩm cho vùng khô"]
                    },
                    {
                        title: "Moisturizer",
                        description: "Kem dưỡng ẩm nhẹ cho vùng dầu, đậm đặc cho vùng khô",
                        products: ["Gel dưỡng ẩm cho vùng dầu", "Kem dưỡng ẩm đậm đặc cho vùng khô", "Serum dưỡng ẩm"]
                    },
                    {
                        title: "Sunscreen",
                        description: "Kem chống nắng cân bằng, không gây bít tắc lỗ chân lông",
                        products: ["Kem chống nắng cân bằng", "Kem chống nắng gel", "Kem chống nắng dưỡng ẩm"]
                    }
                ]
            },
            normal: {
                title: "Da Thường",
                icon: "fas fa-smile",
                description: "Da bạn có sự cân bằng tốt giữa dầu và ẩm. Không quá dầu cũng không quá khô. Cần duy trì sự cân bằng này.",
                recommendations: [
                    {
                        title: "Cleanser",
                        description: "Sữa rửa mặt dịu nhẹ, duy trì sự cân bằng của da",
                        products: ["Sữa rửa mặt dịu nhẹ", "Sữa rửa mặt cân bằng", "Sữa rửa mặt có AHA nhẹ"]
                    },
                    {
                        title: "Toner",
                        description: "Toner cân bằng, duy trì độ pH của da",
                        products: ["Toner cân bằng", "Toner có AHA nhẹ", "Toner dưỡng ẩm"]
                    },
                    {
                        title: "Moisturizer",
                        description: "Kem dưỡng ẩm nhẹ, duy trì sự cân bằng của da",
                        products: ["Kem dưỡng ẩm nhẹ", "Gel dưỡng ẩm", "Serum dưỡng ẩm"]
                    },
                    {
                        title: "Sunscreen",
                        description: "Kem chống nắng cân bằng, bảo vệ da khỏi tia UV",
                        products: ["Kem chống nắng cân bằng", "Kem chống nắng dưỡng ẩm", "Kem chống nắng gel"]
                    }
                ]
            },
            sensitive: {
                title: "Da Nhạy Cảm",
                icon: "fas fa-heart",
                description: "Da bạn rất nhạy cảm, dễ bị kích ứng với các sản phẩm mới. Cần chăm sóc đặc biệt với các sản phẩm dịu nhẹ.",
                recommendations: [
                    {
                        title: "Cleanser",
                        description: "Sữa rửa mặt dịu nhẹ, không chứa hương liệu và chất tẩy mạnh",
                        products: ["Sữa rửa mặt dịu nhẹ", "Sữa rửa mặt không hương liệu", "Sữa rửa mặt cho da nhạy cảm", "Micellar water", "Gel rửa mặt pH cân bằng"]
                    },
                    {
                        title: "Toner",
                        description: "Toner dịu nhẹ, không chứa cồn và hương liệu",
                        products: ["Toner dịu nhẹ", "Toner không hương liệu", "Toner cho da nhạy cảm", "Toner có Centella Asiatica", "Toner có Aloe Vera"]
                    },
                    {
                        title: "Moisturizer",
                        description: "Kem dưỡng ẩm dịu nhẹ, có chứa ceramides và hyaluronic acid",
                        products: ["Kem dưỡng ẩm dịu nhẹ", "Kem dưỡng ẩm có ceramides", "Kem dưỡng ẩm cho da nhạy cảm", "Kem dưỡng ẩm có Niacinamide", "Kem dưỡng ẩm có Peptides"]
                    },
                    {
                        title: "Sunscreen",
                        description: "Kem chống nắng dịu nhẹ, không gây kích ứng",
                        products: ["Kem chống nắng dịu nhẹ", "Kem chống nắng không hương liệu", "Kem chống nắng cho da nhạy cảm", "Kem chống nắng vật lý", "Kem chống nắng có Zinc Oxide"]
                    },
                    {
                        title: "Serum",
                        description: "Serum chống viêm và làm dịu da",
                        products: ["Serum Centella Asiatica", "Serum Niacinamide", "Serum Hyaluronic Acid", "Serum Vitamin E", "Serum Chamomile"]
                    }
                ]
            },
            acne: {
                title: "Da Mụn",
                icon: "fas fa-exclamation-triangle",
                description: "Da bạn có xu hướng bị mụn, cần chăm sóc đặc biệt để kiểm soát dầu và ngăn ngừa mụn.",
                recommendations: [
                    {
                        title: "Cleanser",
                        description: "Sữa rửa mặt có chứa salicylic acid hoặc benzoyl peroxide",
                        products: ["Gel rửa mặt Salicylic Acid", "Sữa rửa mặt Benzoyl Peroxide", "Sữa rửa mặt Tea Tree Oil", "Sữa rửa mặt Sulfur", "Gel rửa mặt AHA"]
                    },
                    {
                        title: "Toner",
                        description: "Toner có chứa AHA/BHA để thông thoáng lỗ chân lông",
                        products: ["Toner Salicylic Acid", "Toner Glycolic Acid", "Toner Witch Hazel", "Toner Niacinamide", "Toner Tea Tree Oil"]
                    },
                    {
                        title: "Treatment",
                        description: "Sản phẩm điều trị mụn chuyên biệt",
                        products: ["Serum Benzoyl Peroxide", "Serum Salicylic Acid", "Serum Niacinamide", "Serum Retinol", "Spot Treatment Tea Tree Oil"]
                    },
                    {
                        title: "Moisturizer",
                        description: "Kem dưỡng ẩm nhẹ, không gây bít tắc lỗ chân lông",
                        products: ["Gel dưỡng ẩm oil-free", "Kem dưỡng ẩm có Niacinamide", "Kem dưỡng ẩm có Hyaluronic Acid", "Kem dưỡng ẩm có Ceramides", "Gel dưỡng ẩm có Aloe Vera"]
                    },
                    {
                        title: "Sunscreen",
                        description: "Kem chống nắng không gây bít tắc lỗ chân lông",
                        products: ["Kem chống nắng gel", "Kem chống nắng matte", "Kem chống nắng oil-free", "Kem chống nắng có Zinc Oxide", "Kem chống nắng có Niacinamide"]
                    }
                ]
            },
            mature: {
                title: "Da Lão Hóa",
                icon: "fas fa-clock",
                description: "Da bạn có dấu hiệu lão hóa, cần chăm sóc đặc biệt để chống lão hóa và tăng cường collagen.",
                recommendations: [
                    {
                        title: "Cleanser",
                        description: "Sữa rửa mặt dịu nhẹ, không làm khô da",
                        products: ["Sữa rửa mặt cream", "Sữa rửa mặt có Peptides", "Sữa rửa mặt có Ceramides", "Sữa rửa mặt có Hyaluronic Acid", "Sữa rửa mặt có Vitamin E"]
                    },
                    {
                        title: "Serum",
                        description: "Serum chống lão hóa mạnh mẽ",
                        products: ["Serum Retinol", "Serum Vitamin C", "Serum Peptides", "Serum Hyaluronic Acid", "Serum Niacinamide"]
                    },
                    {
                        title: "Moisturizer",
                        description: "Kem dưỡng ẩm đậm đặc, có chứa chất chống lão hóa",
                        products: ["Kem dưỡng ẩm có Retinol", "Kem dưỡng ẩm có Peptides", "Kem dưỡng ẩm có Ceramides", "Kem dưỡng ẩm có Vitamin C", "Kem dưỡng ẩm có Hyaluronic Acid"]
                    },
                    {
                        title: "Eye Cream",
                        description: "Kem dưỡng mắt chuyên biệt",
                        products: ["Kem dưỡng mắt có Retinol", "Kem dưỡng mắt có Peptides", "Kem dưỡng mắt có Caffeine", "Kem dưỡng mắt có Hyaluronic Acid", "Kem dưỡng mắt có Vitamin C"]
                    },
                    {
                        title: "Sunscreen",
                        description: "Kem chống nắng có chứa chất chống lão hóa",
                        products: ["Kem chống nắng có Vitamin C", "Kem chống nắng có Niacinamide", "Kem chống nắng có Peptides", "Kem chống nắng có Hyaluronic Acid", "Kem chống nắng có Ceramides"]
                    }
                ]
            }
        };
        
        // Quiz state
        let currentQuestion = 1;
        let answers = {};
        let totalQuestions = 5;
        
        // Initialize quiz
        function initQuiz() {
            currentQuestion = 1;
            answers = {};
            showQuestion(1);
            updateProgress();
            updateNavigation();
        }
        
        // Show specific question
        function showQuestion(questionNumber) {
            // Hide all questions
            document.querySelectorAll('.question-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Show current question
            const currentCard = document.querySelector(`[data-question="${questionNumber}"]`);
            if (currentCard) {
                currentCard.classList.add('active');
            }
            
            // Update question counter
            document.getElementById('questionCounter').textContent = `Câu ${questionNumber} / ${totalQuestions}`;
        }
        
        // Update progress bar
        function updateProgress() {
            const progress = ((currentQuestion - 1) / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }
        
        // Update navigation buttons
        function updateNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            // Show/hide previous button
            if (currentQuestion === 1) {
                prevBtn.style.display = 'none';
            } else {
                prevBtn.style.display = 'block';
            }
            
            // Update next button text
            if (currentQuestion === totalQuestions) {
                nextBtn.innerHTML = 'Kết Quả <i class="fas fa-check ms-2"></i>';
            } else {
                nextBtn.innerHTML = 'Tiếp <i class="fas fa-arrow-right ms-2"></i>';
            }
        }
        
        // Handle answer selection
        function selectAnswer(questionNumber, answerType) {
            // Remove selected class from all options in current question
            const currentCard = document.querySelector(`[data-question="${questionNumber}"]`);
            currentCard.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            event.target.classList.add('selected');
            
            // Store answer
            answers[questionNumber] = answerType;
        }
        
        // Go to next question
        function nextQuestion() {
            if (currentQuestion < totalQuestions) {
                currentQuestion++;
                showQuestion(currentQuestion);
                updateProgress();
                updateNavigation();
            } else {
                showResults();
            }
        }
        
        // Go to previous question
        function prevQuestion() {
            if (currentQuestion > 1) {
                currentQuestion--;
                showQuestion(currentQuestion);
                updateProgress();
                updateNavigation();
            }
        }
        
        // Show results
        function showResults() {
            // Hide quiz questions
            document.getElementById('quizQuestions').style.display = 'none';
            document.getElementById('quizNav').style.display = 'none';
            
            // Show results
            document.getElementById('quizResults').style.display = 'block';
            
            // Calculate skin type
            const skinType = calculateSkinType();
            displayResults(skinType);
        }
        
        // Calculate skin type based on answers
        function calculateSkinType() {
            const answerCounts = {};
            
            // Count answers by type
            Object.values(answers).forEach(answer => {
                answerCounts[answer] = (answerCounts[answer] || 0) + 1;
            });
            
            // Special logic for sensitive skin
            if (answerCounts.sensitive >= 2) {
                return 'sensitive';
            }
            
            // Special logic for acne-prone skin
            if (answerCounts.oily >= 2 && answerCounts.oily > answerCounts.dry) {
                return 'acne';
            }
            
            // Special logic for mature skin (if age-related questions were added)
            if (answerCounts.dry >= 2 && answerCounts.dry > answerCounts.oily) {
                return 'mature';
            }
            
            // Find most common answer type
            let maxCount = 0;
            let skinType = 'normal';
            
            Object.entries(answerCounts).forEach(([type, count]) => {
                if (count > maxCount) {
                    maxCount = count;
                    skinType = type;
                }
            });
            
            return skinType;
        }
        
        // Display results
        function displayResults(skinType) {
            const result = skinTypeResults[skinType];
            
            // Update skin type info
            document.getElementById('skinTypeIcon').innerHTML = `<i class="${result.icon}"></i>`;
            document.getElementById('skinTypeTitle').textContent = result.title;
            document.getElementById('skinTypeDescription').textContent = result.description;
            
            // Update recommendations
            const recommendationsList = document.getElementById('recommendationsList');
            recommendationsList.innerHTML = result.recommendations.map(rec => `
                <div class="recommendation-item">
                    <div class="recommendation-title">${rec.title}</div>
                    <div class="recommendation-description">${rec.description}</div>
                        <div class="recommendation-products">
                            ${rec.products.map(product => `<span class="product-tag">${product}</span>`).join('')}
                        </div>
                        <div class="mt-2">
                            <a href="/products" class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-shopping-bag me-1"></i>Xem Sản Phẩm Phù Hợp
                            </a>
                        </div>
                </div>
            `).join('');
        }
        
        // Share result
        function shareResult(platform) {
            const skinType = calculateSkinType();
            const result = skinTypeResults[skinType];
            const url = window.location.href;
            const text = `Tôi vừa làm quiz kiểm tra loại da và kết quả là: ${result.title}! Khám phá loại da của bạn tại: ${url}`;
            
            let shareUrl = '';
            
            switch(platform) {
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
                    break;
                case 'zalo':
                    shareUrl = `https://zalo.me/share?text=${encodeURIComponent(text)}`;
                    break;
            }
            
            if (shareUrl) {
                window.open(shareUrl, '_blank', 'width=600,height=400');
            }
        }
        
        // Copy link
        function copyLink() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                alert('Đã copy link vào clipboard!');
            });
        }
        
        // Restart quiz
        function restartQuiz() {
            // Reset state
            currentQuestion = 1;
            answers = {};
            
            // Show quiz questions
            document.getElementById('quizQuestions').style.display = 'block';
            document.getElementById('quizNav').style.display = 'flex';
            document.getElementById('quizResults').style.display = 'none';
            
            // Reset progress
            updateProgress();
            updateNavigation();
            showQuestion(1);
            
            // Clear selections
            document.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected');
            });
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            initQuiz();
            
            // Answer selection
            document.querySelectorAll('.answer-option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionCard = this.closest('.question-card');
                    const questionNumber = parseInt(questionCard.dataset.question);
                    const answerType = this.dataset.answer;
                    
                    selectAnswer(questionNumber, answerType);
                });
            });
            
            // Navigation buttons
            document.getElementById('nextBtn').addEventListener('click', nextQuestion);
            document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        });
    </script>
{% endblock %}