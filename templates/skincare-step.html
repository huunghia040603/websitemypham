{% extends "base.html" %}

{% block title %}{{ data.title if not not_found else 'Bước dưỡng da' }} - BuddySkincare{% endblock %}

{% block extra_css %}
<style>
    body { background: #ffffff; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; color: #374151; }
    .step-container { max-width: 100%; margin: 0 auto; padding: 0; }
    .hero { padding: 2rem 0 1.5rem; text-align: center; background: linear-gradient(135deg,#667eea,#764ba2); color: #fff; }
    .hero h1 { font-weight: 800; letter-spacing: -0.02em; }
    .content { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; }
    .card { background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 1rem; }
    h2 { font-size: 1.25rem; font-weight: 800; margin: 0 0 .75rem; color: #111827; }
    ol, ul { margin: 0; }
    li { margin-bottom: .45rem; }
    .products { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap: 1rem; }
    .product { background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; }
    .product img { width: 100%; height: 160px; object-fit: cover; display: block; }
    .product .p-content { padding: .8rem; }
    .product h5 { font-size: 1rem; font-weight: 700; margin: 0 0 .25rem; color: #111827; }
    .price { color: #dc2626; font-weight: 800; font-size: .98rem; }
    .old { text-decoration: line-through; color: #9ca3af; font-size: .85rem; margin-left: .35rem; }
    @media (max-width: 900px){ .content{ grid-template-columns: 1fr; } }
</style>
{% endblock %}

{% block content %}
<div class="step-container">
    <section class="hero">
        {% if not_found %}
            <h1>Bước không tồn tại</h1>
            <p>Không tìm thấy thông tin cho bước {{ step_id }}.</p>
        {% else %}
            <h1>{{ data.title }}</h1>
            <p>{{ data.desc }}</p>
        {% endif %}
    </section>

    <div class="content">
        <div>
            <div class="card">
                <h2>Cách thực hiện</h2>
                <ol>
                    {% for item in data.how %}
                    <li>{{ item }}</li>
                    {% endfor %}
                </ol>
            </div>
            <div class="card" style="margin-top:1rem;" >
                <h2>Mẹo nhỏ</h2>
                <ul>
                    {% for item in data.tips %}
                    <li>{{ item }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% if data.products and data.products|length %}
            <div class="card" style="margin-top:1rem;">
                <h2>Gợi ý sản phẩm</h2>
                <div class="products">
                    {% for p in data.products %}
                    <div class="product">
                        <img src="{{ url_for('static', filename=p.img) }}" alt="{{ p.name }}">
                        <div class="p-content">
                            <h5>{{ p.name }}</h5>
                            <div><span class="price">{{ p.price }}</span>{% if p.old %}<span class="old">{{ p.old }}</span>{% endif %}</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
        <aside>
            <div class="card">
                <h2>Đi tới bước khác</h2>
                <ul>
                    <li><a href="/skincare/step/1">Bước 1: Làm sạch</a></li>
                    <li><a href="/skincare/step/2">Bước 2: Cân bằng</a></li>
                    <li><a href="/skincare/step/3">Bước 3: Serum điều trị</a></li>
                    <li><a href="/skincare/step/4">Bước 4: Khóa ẩm</a></li>
                    <li><a href="/skincare/step/5">Bước 5: Chống nắng</a></li>
                    <li><a href="/skincare/step/6">Bước 6: Mask/Peel</a></li>
                </ul>
            </div>
        </aside>
    </div>
</div>
{% endblock %}